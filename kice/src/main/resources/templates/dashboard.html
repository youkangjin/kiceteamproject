<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
<div id="group-management">
    <h3>조 관리</h3>
    <input type="text" id="group-name" placeholder="조 이름" />
    <textarea id="group-description" placeholder="조 설명"></textarea>
    <button onclick="createGroup()">조 생성</button>
    <ul id="group-list"></ul>
</div>

<div id="school-management">
    <h3>학교 관리</h3>
    <select id="school-select"></select>
    <button onclick="addSchoolToGroup()">학교 추가</button>
    <button onclick="removeSchoolFromGroup()">학교 제거</button>
</div>

<script>
    async function createGroup() {
        const name = document.getElementById('group-name').value;
        const description = document.getElementById('group-description').value;
        const response = await fetch('/api/groups', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ groupName: name, description })
        });
        const group = await response.json();
        alert(`조 생성 완료: ${group.groupName}`);
        fetchGroups();
    }

    async function fetchGroups() {
        const response = await fetch('/api/groups');
        const groups = await response.json();
        const groupList = document.getElementById('group-list');
        groupList.innerHTML = '';
        groups.forEach(group => {
            const li = document.createElement('li');
            li.textContent = group.groupName;
            groupList.appendChild(li);
        });
    }

    async function addSchoolToGroup() {
        const schoolId = document.getElementById('school-select').value;
        const groupId = 1; // 선택된 그룹 ID
        const response = await fetch(`/api/groups/${groupId}/schools`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ schoolId })
        });
        const result = await response.json();
        alert(result.message);
    }

    async function removeSchoolFromGroup() {
        const schoolId = document.getElementById('school-select').value;
        const groupId = 1; // 선택된 그룹 ID
        const response = await fetch(`/api/groups/${groupId}/schools`, {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ schoolId })
        });
        const result = await response.json();
        alert(result.message);
    }

    fetchGroups();
</script>

</body>
</html>